---
layout: post
title: "Your function's doppelgänger"
category: math
---

<script type="text/javascript" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>



## [Definition](#definition)
One of the first things I realized by approaching convex analysis is the importance of notation. The use of simple symbols or tiny marks adjustements to encapsulate different topics, sometimes even a wide class of problems, is crucial to develop extremely powerful mathematical primitives.
The [Fenchel conjugate](https://en.wikipedia.org/wiki/Convex_conjugate), introduced by [Werner Fenchel](https://en.wikipedia.org/wiki/Werner_Fenchel) in 1949, is a perfect example of this concept: even it might look mysterious at first sight it is one of the most important primitives in duality theory. In this article, as in others I may write in the future, I’m not aiming to develop a fully rigorous mathematical treatment of this concept. Instead, I want to offer inputs that spark the kind of mental machinery that helps build a practical intuition, making it easier to categorize and recall in your mind.

Given *any* function $f:\mathbb{R}^n\to\mathbb{R}$, the Fenchel conjugate of $f$ is defined as
$$
f^\star(y)=\sup_x\; \langle x,y\rangle - f(x)
$$
You can refer to the legendary [Boyd's book](https://web.stanford.edu/~boyd/cvxbook/bv_cvxbook.pdf) (chapter 3.3) or [Stanford class record](https://youtu.be/lEN2xvTTr0E?list=PL3940DD956CDF0622&t=1639) to have a nice and more exhaustive introduction to this concept. At first glance, the Fenchel conjugate resembles the optimal value of a tiny optimization problem in $x$, where the optimal value is kept as function of the parameter $y$. Thus, talking about notation, the apparently harmless symbol $f^\star$ is quietly hiding the solution to a certain optimization problem involving its spiritual relative $f$. This is a good path to develop a first intuition about this operator, so it is worth elaborate more with an example.

### [Example for hypebeasters](#example)
Imagine you work at Nike and want to determine the optimal quantity of the upcoming hyped sneakers to release on SNKRS that are going to be sniped by hypebeasters. Given that your marketing manager has already set fixed prices $y=(y_1,\dots,y_n)\in\mathbb{R}^n$ for each of the $n$ upcoming collections, you are asking: *"What are the optimal amounts of sneakers $x=(x_1,\dots,x_n)\in\mathbb{R}^n$ that should be produced and realesed for this drop? Should we drop more Air Jordan 3 or Nike Dunk Low?"*. Suppose that the production/distribution cost is captured by a certain function $f:\mathbb{R}^n\to\mathbb{R}$ (as fancy as you want) which aggregates the total costs of producing $x_i$ for each collection of sneakers: in other words $f(x)$ represents the total cost for this drop if you want to produce $x$ amounts of sneakers. On the other hand, since the $i$-th collection is going to be sold at a price of $y_i$ dollars and assuming the hype for the upcoming drop is so high that there will likely be no leftovers, the total revenue for this drop is going to be 
$$
\langle x, y\rangle=\sum_{i=1}^n y_ix_i
$$
Having said that, it would be wise producing the amount of sneakers that would maximize the profit for this drop, where the profit function is simply total revenues minus total costs, that is: 
$$
\Pi(x;y)=\langle x, y\rangle-f(x)
$$
As a result, armed with [optimization-solver](https://github.com/fedemagnani/optimization-solvers), your goal is to solve the following optimization problem:
$$
\sup_{x}\; \Pi(x;y) = \sup_{x}\; \langle x, y\rangle-f(x) =:f^\star(y)
$$
which precisely resembles the Fenchel conjugate definition! In other words, by knowing the fenchel conjugate $f^\star$ of the production/distribution cost function $f$ you also know an upper bound on the maximal profit you can score from this drop given any possible prices recommended by the marketing manager, and such upper bound is attainable if you produce the optimal amount of sneakers $x^\star(y) = \arg\max_x\; \langle x, y\rangle-f(x)$. Giving prices $y$, if $f^\star(y)$ is particularly low then you can't be particularly ambitious on the gains of this drop, and you have a provable argument to blame the marketing manager for the chosen prices.

## [Properties and famous conjugates](#properties-and-famous-conjugates)
- convexity and lower semicontinuity (pointwise supremum of a family of functions affine in the argument -> desmos) 
- fenchel inequality (trivial derivation from definition) f* = sup_x f for >= <x>
- support functions 

## [A subdifferential look](#subdifferential-look)

## [References](#references)

